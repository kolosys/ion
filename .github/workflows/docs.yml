name: Generate Documentation

on:
  push:
    branches: [main]
    paths: 
      - '**/*.go'
      - 'docs/**'
      - 'docs-templates/**'
      - 'examples/**'
      - 'kolosys-docs.json'
  pull_request:
    branches: [main]
    paths:
      - '**/*.go'
      - 'docs/**'
      - 'docs-templates/**'
      - 'examples/**'
      - 'kolosys-docs.json'
  workflow_dispatch:

# Permissions required for auto-committing generated documentation
permissions:
  contents: write
  pull-requests: write

jobs:
  generate-docs:
    uses: kolosys/docs/.github/workflows/docs-workflow.yml@main
    with:
      repository_name: "ion"
      go_version: "1.22"
      generate_examples: true
      skip_commit: false
      create_pr: false
    # permissions:
    #   contents: write
    #   pull-requests: write
